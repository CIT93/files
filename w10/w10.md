# JavaScript Debugging Exercise: Carbon Footprint Calculator

### Instructions for Students

For each scenario below, open the Chrome DevTools (**right-click -> Inspect**) and go to the **Sources** tab. Find the specified JavaScript file, locate the line number, and click on the line number to set a **breakpoint**. Then, perform the action described (e.g., "submit the form") to pause the code. Use the **Scope** panel on the right to inspect variables and answer the question.

---

### Group 1: Form Submission and Data Flow

#### **Breakpoint 1: The Initial Event**
* **File:** `app.js`
* **Function:** `handleFormSubmit`
* **Line:** `61` (`event.preventDefault();`)
* **Action:** Fill out the form with any data and click the "Calculate Footprint" button.
* **‚ùì Question:** Look at the `event` object in the Scope panel. What was the `type` of event that triggered this function, and what `target` element did it come from?
* **üí° Concept:** Understanding event listeners and the event object.

#### **Breakpoint 2: Getting Form Data**
* **File:** `form-handler.js`
* **Function:** `getFormInputs`
* **Line:** `110` (`return { ... };`)
* **Action:** With the breakpoint from #1 still active, press the "Resume script execution" button (blue arrow) to continue to this next breakpoint.
* **‚ùì Question:** Before this line executes, inspect the values of `householdMembersInput.value` and `isApartmentInput.checked`. What are their data types? How do they compare to the values inside the returned object after using `parseInt()`?
* **üí° Concept:** Reading values from different HTML input elements and type coercion (`String` to `Number`).

#### **Breakpoint 3: Processing Radio Buttons**
* **File:** `form-handler.js`
* **Function:** `getSelectedRadioValue`
* **Line:** `52` (`if (radio.checked) {`)
* **Action:** Submit the form. The code will pause multiple times inside this loop.
* **‚ùì Question:** Click the "Step over" button a few times. For the "dietType" radio buttons, what is the `value` of the `radio` element when `radio.checked` is finally `true`?
* **üí° Concept:** Looping through a `NodeList` and checking element properties.

---

### Group 2: The Calculation Pipeline

#### **Breakpoint 4: Passing Arguments to Functions**
* **File:** `calculator.js`
* **Function:** `calculateFootprint`
* **Line:** `127` (`const householdPoints = calculateHouseholdPoints(data.householdMembers);`)
* **Action:** Submit the form and resume until you hit this breakpoint.
* **‚ùì Question:** The parameter for this function is named `data`. What was the name of the variable passed as an *argument* to this function back in `app.js` (line 62)? Does the name have to be the same?
* **üí° Concept:** The difference between function **arguments** (the values passed in) and **parameters** (the names used inside the function).

#### **Breakpoint 5: Conditional Logic in Calculations**
* **File:** `calculator.js`
* **Function:** `calculateHouseholdPoints`
* **Line:** `4` (`if (householdMembers === 1) return 14;`)
* **Action:** Enter `3` for the number of household members and submit the form. Resume until you hit this breakpoint.
* **‚ùì Question:** Step through the code line-by-line using the "Step over" button. Which `if` or `else if` condition evaluates to `true`, and what value is returned?
* **üí° Concept:** How `if`/`else if` statements create mutually exclusive code paths.

#### **Breakpoint 6: The Final Calculated Object**
* **File:** `app.js`
* **Function:** `handleFormSubmit`
* **Line:** `65` (`const entryToSave = { ... };`)
* **Action:** Submit the form and resume until you hit this breakpoint.
* **‚ùì Question:** Inspect the `calculatedResults` object in the Scope panel. What are its properties, and what is the value of `totalFootprint`?
* **üí° Concept:** How functions return objects containing multiple pieces of data.

---

### Group 3: Managing Data with Arrays and Objects

#### **Breakpoint 7: Creating a New Entry**
* **File:** `app.js`
* **Function:** `handleFormSubmit`
* **Line:** `92` (`carbonFootprintEntries.push(entryToSave);`)
* **Action:** Submit a new form entry (not an update). Resume until you hit this breakpoint.
* **‚ùì Question:** Look at the `entryToSave` object. It was created by combining `formData` and `calculatedResults`. Does it have an `id` and `timestamp` yet?
* **üí° Concept:** Using the spread syntax (`...`) to combine objects and adding new properties.

#### **Breakpoint 8: Adding to the Main Array**
* **File:** `app.js`
* **Function:** `handleFormSubmit`
* **Line:** `96` (`storage.saveEntries(carbonFootprintEntries);`)
* **Action:** Submit the form. Resume until you hit this breakpoint.
* **‚ùì Question:** In the Scope panel, inspect the `carbonFootprintEntries` array. How many items does it contain now? Look at the last item; is it the one you just submitted?
* **üí° Concept:** The `push()` method adds a new element to the end of an array.

#### **Breakpoint 9: Finding an Entry to Update**
* **File:** `app.js`
* **Function:** `handleFormSubmit`
* **Line:** `74` (`const index = carbonFootprintEntries.findIndex(function(entry){`)
* **Action:** Create at least two entries. Click "Edit" on the first entry, change a value, and click "Update Entry". Resume until you hit this breakpoint.
* **‚ùì Question:** What is the value of `formData.id`? What is the purpose of the `findIndex` method here?
* **üí° Concept:** Using array methods (`findIndex`) to locate specific objects in an array based on a property.

#### **Breakpoint 10: Updating an Object in the Array**
* **File:** `app.js`
* **Function:** `handleFormSubmit`
* **Line:** `79` (`carbonFootprintEntries[index] = entryToSave;`)
* **Action:** Continue from the previous breakpoint.
* **‚ùì Question:** Before this line runs, inspect `carbonFootprintEntries`. Note the original values for the entry at the found `index`. Now, step over this line. Inspect the array again. Has the object at that index been replaced with the new `entryToSave` data?
* **üí° Concept:** Updating an element in an array by its index.

---

### Group 4: Local Storage and Data Persistence

#### **Breakpoint 11: Preparing Data for Storage**
* **File:** `storage.js`
* **Function:** `saveEntries`
* **Line:** `7` (`localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(entries));`)
* **Action:** Submit a new entry and resume until you hit this breakpoint.
* **‚ùì Question:** In the Scope panel, look at the `entries` parameter. It's a JavaScript array of objects. Now, in the **Console**, type `JSON.stringify(entries)` and press Enter. How is the console output different from the original `entries` array? Why is this step necessary for `localStorage`?
* **üí° Concept:** `JSON.stringify()` converts JavaScript objects into a string format for storage or transmission.

#### **Breakpoint 12: Retrieving Data from Storage**
* **File:** `storage.js`
* **Function:** `loadEntries`
* **Line:** `24` (`return JSON.parse(dataString);`)
* **Action:** Refresh the page. The script will pause here during initialization.
* **‚ùì Question:** What is the data type of the `dataString` variable? (Hover over it). Step over this line. What is the data type of the value that is returned?
* **üí° Concept:** `JSON.parse()` converts a JSON string back into a JavaScript object or array.

---

### Group 5: Rendering the UI

#### **Breakpoint 13: Starting the Table Render**
* **File:** `table-renderer.js`
* **Function:** `renderTable`
* **Line:** `216` (`const sortedEntries = [...entries].sort(function(a, b){`)
* **Action:** Submit a form or refresh the page with existing data. Resume until here.
* **‚ùì Question:** How many items are in the `entries` array that was passed into this function? Is this the complete dataset?
* **üí° Concept:** Passing the application's entire dataset to a dedicated rendering module.

#### **Breakpoint 14: Looping to Build Rows**
* **File:** `table-renderer.js`
* **Function:** `renderTable`
* **Line:** `222` (`const rowElement = createTableRow(entry);`)
* **Action:** Continue from the previous breakpoint.
* **‚ùì Question:** Let the code pause here. Inspect the `entry` object for the current loop iteration. Then, step into the `createTableRow` function. How is the `entry` object's data used to build the HTML string?
* **üí° Concept:** Iterating over an array and using each object's data to generate dynamic HTML.

#### **Breakpoint 15: Displaying Calculated Results**
* **File:** `results-display.js`
* **Function:** `displayResults`
* **Line:** `19` (`totalFootprintDisplay.textContent = ...;`)
* **Action:** Submit a new entry and resume until you hit this breakpoint.
* **‚ùì Question:** At this point in the code, has the "Current Entry's Footprint" section on the webpage become visible yet? Why or why not? (Hint: check line 26).
* **üí° Concept:** JavaScript can manipulate both the content (`textContent`) and the styling (`style.display`) of HTML elements.

---

### Group 6: Editing and Deleting

#### **Breakpoint 16: Starting the Edit Process**
* **File:** `app.js`
* **Function:** `handleEditEntry`
* **Line:** `210` (`const entryToEdit = carbonFootprintEntries.find(function(entry){`)
* **Action:** With at least one entry in the table, click its "Edit" button.
* **‚ùì Question:** What is the value of the `id` parameter passed into this function? How did the code know which entry's `id` to send? (Hint: Look at `table-renderer.js`, line 185).
* **üí° Concept:** Using data attributes (`data-id`) on HTML elements to associate them with specific data.

#### **Breakpoint 17: Populating the Form**
* **File:** `form-handler.js`
* **Function:** `populateFormForEdit`
* **Line:** `76` (`householdMembersInput.value = entry.householdMembers;`)
* **Action:** Continue from the previous breakpoint.
* **‚ùì Question:** Inspect the `entry` object. Now, step over the next few lines. Are the values from the `entry` object correctly appearing in the form fields on the webpage?
* **üí° Concept:** Programmatically setting the `value` and `checked` properties of form inputs.

#### **Breakpoint 18: Starting the Delete Process**
* **File:** `app.js`
* **Function:** `handleDeleteEntry`
* **Line:** `175` (`const indexToDelete = carbonFootprintEntries.findIndex(function(entry){`)
* **Action:** Click "Delete" on any table row, then click the "Confirm Delete" button that appears.
* **‚ùì Question:** What is the `id` of the entry being deleted? What do you expect the value of `indexToDelete` to be?
* **üí° Concept:** A multi-step UI action (confirm button) triggers a data-modifying function.

#### **Breakpoint 19: Removing from the Array**
* **File:** `app.js`
* **Function:** `handleDeleteEntry`
* **Line:** `180` (`carbonFootprintEntries.splice(indexToDelete, 1);`)
* **Action:** Continue from the previous breakpoint.
* **‚ùì Question:** Before this line runs, check the `length` of `carbonFootprintEntries`. Step over this line. What is the `length` now?
* **üí° Concept:** Using `splice()` to remove an element from an array by its index.

#### **Breakpoint 20: Module Scope**
* **File:** `calculator.js`
* **Function:** `calculateFootprint`
* **Line:** `127` (`const householdPoints = ...`)
* **Action:** Submit a form and pause at this breakpoint.
* **‚ùì Question:** Go to the **Console**. Type `carbonFootprintEntries` and press Enter. What is the result? Why can't this module access the `carbonFootprintEntries` array directly from `app.js`?
* **üí° Concept:** **Module scope**. Variables declared in one module (`app.js`) are not available in another (`calculator.js`) unless they are explicitly exported and imported. Data must be passed as function arguments.